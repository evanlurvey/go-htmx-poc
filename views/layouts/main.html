<!DOCTYPE html>
<html lang="en">

<head>
    <title>{{block "title" .}}{{end}}</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Auto Reload Stuff -->
    <script>
        let version = "{{AppVersion}}";
        function setupReload() {
            let s = new WebSocket("ws://localhost:8080/dev/ws/reload");
            s.onopen = () => {
                console.log("autoreload: server back up");
            };
            s.onmessage = (m) => {
                if (m.data != version) {
                    console.log("autoreload: wrong version");
                    location.reload();
                } else {
                    console.log("autoreload: correct version");
                }
            };
            s.onclose = (e) => {
                setTimeout(setupReload, 200);
            };
        }
        setupReload();
    </script>
</head>

<body class="flex flex-col">
    <header class="flex bg-blue-500">
        <div>Contact Manager</div>
    </header>
    <div class="flex flex-col">{{block "content" .}}{{end}}</div>
</body>

</html>
